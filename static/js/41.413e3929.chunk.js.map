{"version":3,"sources":["api.js","assets/images/no_image.png","auth-header-file.js","views/advertisements/AddAdvertisement.js"],"names":["api","RAZOR_PAY_TEST_KEY","apiUrl","mobileApiUrl","imgUrlService","imgUrlBrand","imgUrlAds","imgUrlShopImg","noImage","img","module","exports","authHeader","user","JSON","parse","localStorage","getItem","accessToken","override","css","AddAdvertisement","props","getServiceProviders","setState","loading","fetch","method","headers","authHeaderFile","then","response","json","responseJsonFromServerData","console","log","options","value","label","err","catch","error","handleChange","input","e","target","onChangeFile","event","imageFile","files","stat","adImageError","adImage","name","match","Math","round","size","adImagePreview","URL","createObjectURL","adSubmit","state","adName","adNameError","formData","FormData","append","shopId","body","Toast","success","document","getElementById","reset","shopIdError","history","push","pathname","data","fail","cancel","bind","this","height","width","color","sm","xs","md","id","htmlFor","onChange","style","marginBottom","display","maxWidth","maxHeight","src","alt","className","autoFocus","type","placeholder","borderColor","isClearable","val","onClick","Component"],"mappings":"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","file":"static/js/41.413e3929.chunk.js","sourcesContent":["import img from \"./assets/images/no_image.png\";\nvar api = {\n  //heroku\n  // apiUrl: \"https://mechgiri-api.herokuapp.com/web/\",\n  // mobileApiUrl: \"https://mechgiri-api.herokuapp.com/API/\",\n  // imgUrlService: \"https://mechgiri-api.herokuapp.com/service-icons/\",\n  // imgUrlBrand: \"https://mechgiri-api.herokuapp.com/brand-icons/\",\n  // imgUrlAds: \"https://mechgiri-api.herokuapp.com/mobile-ads/\",\n  // imgUrlShopImg: \"https://mechgiri-api.herokuapp.com/shop-img/\",\n\n  RAZOR_PAY_TEST_KEY: \"rzp_live_BXGi4WJt107sJX\",\n\n  apiUrl: \"http://api.mechgiri.com/web/\",\n  mobileApiUrl: \"http://api.mechgiri.com/API/\",\n  imgUrlService: \"http://api.mechgiri.com/service-icons/\",\n  imgUrlBrand: \"http://api.mechgiri.com/brand-icons/\",\n  imgUrlAds: \"http://api.mechgiri.com/mobile-ads/\",\n  imgUrlShopImg: \"http://api.mechgiri.com/shop-img/\",\n\n  noImage: img,\n\n  // apiUrl: \"http://127.0.0.1:3001/web/\",\n  // mobileApiUrl: \"http://127.0.0.1:3001/API/\",\n  // imgUrlService: \"http://127.0.0.1:3001/service-icons/\",\n  // imgUrlBrand: \"http://127.0.0.1:3001/brand-icons/\",\n  // imgUrlAds: \"http://127.0.0.1:3001/mobile-ads/\",\n  // imgUrlShopImg: \"http://127.0.0.1:3001/shop-img/\",\n};\nexport default api;\n","module.exports = __webpack_public_path__ + \"static/media/no_image.104a1a91.png\";","export default function authHeader() {\r\n  const user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n  if (user && user.accessToken) {\r\n    // header for all requests\r\n    return {\r\n      // \"Content-Type\": \"multipart/form-data\",\r\n      \"x-access-token\": user.accessToken,\r\n    };\r\n  } else {\r\n    return {};\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\nimport {\n  CButton,\n  CFormGroup,\n  CCard,\n  CCardBody,\n  CCardHeader,\n  CCol,\n  CRow,\n  CLabel,\n  CInput,\n  CInputFile,\n} from \"@coreui/react\";\nimport api from \"../../api\";\n// import authHeader from \"../../auth-header\";\nimport authHeaderFile from \"../../auth-header-file\";\nimport Toast from \"light-toast\";\nimport { ScaleLoader } from \"react-spinners\";\nimport { css } from \"@emotion/core\";\n\nimport Select from \"react-select\";\n\nconst override = css`\n  display: block;\n  border-color: black;\n  position: absolute;\n  left: 43%;\n  top: 50%;\n  z-index: 1;\n`;\n\nclass AddAdvertisement extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = this.handleChange.bind(this);\n    this.onChangeFile = this.onChangeFile.bind(this);\n    this.adSubmit = this.adSubmit.bind(this);\n    this.cancel = this.cancel.bind(this);\n\n    this.state = {\n      loading: false,\n      adImage: null,\n      adImagePreview: null,\n      adName: null,\n      shopId: null,\n\n      adImageError: null,\n      adNameError: null,\n      shopIdError: null,\n\n      options: [],\n    };\n    // this.reader = new FileReader();\n  }\n\n  componentDidMount() {\n    this.getServiceProviders();\n  }\n\n  getServiceProviders = () => {\n    this.setState({ loading: true });\n    fetch(api.apiUrl + \"get_service_providers\", {\n      method: \"GET\",\n      headers: authHeaderFile(),\n      // body: JSON.stringify(data),\n    })\n      .then((response) => response.json())\n      .then((responseJsonFromServerData) => {\n        console.log(responseJsonFromServerData);\n\n        try {\n          this.setState({\n            options: [\n              { value: \"null\", label: \"None\" },\n              ...responseJsonFromServerData.options,\n            ],\n          });\n        } catch (err) {\n          console.log(err);\n        }\n        this.setState({ loading: false });\n      })\n      .catch((error) => {\n        console.error(error);\n        this.setState({ loading: false });\n      });\n  };\n\n  handleChange = (input) => (e) => {\n    // console.log(input);\n    // console.log(e.target.value);\n    this.setState({ [input]: e.target.value });\n    this.setState({ [input + \"Error\"]: \"\" });\n  };\n\n  onChangeFile = (event) => {\n    const imageFile = event.target.files[0];\n    var stat = false;\n    if (!imageFile) {\n      console.log(\"1\");\n      this.setState({ adImageError: \"Please select image\", adImage: null });\n      stat = true;\n      //   return false;\n    }\n    // console.log(imageFile.name);\n    if (!imageFile.name.match(/\\.(jpg|jpeg|png)$/)) {\n      console.log(\"2\");\n      this.setState({\n        adImageError: \"Please select valid image\",\n        adImage: null,\n      });\n      stat = true;\n      //   return false;\n    }\n\n    if (Math.round(imageFile.size / 1024) > 500) {\n      console.log(\"3\");\n      this.setState({ adImageError: \"Max file size 500kb\", adImage: null });\n      stat = true;\n      //   return false;\n    }\n\n    if (stat === false) {\n      this.setState({\n        adImage: event.target.files[0],\n        adImagePreview: URL.createObjectURL(event.target.files[0]),\n        adImageError: \"\",\n      });\n    } else {\n      console.log(\"failed\");\n      this.setState({\n        adImage: null,\n        adImagePreview: null,\n      });\n    }\n  };\n\n  adSubmit = () => {\n    let error = false;\n    if (this.state.adImage == null) {\n      this.setState({ adImageError: \"Select Advertisement Image\" });\n      error = true;\n    } else {\n      this.setState({ adImageError: null });\n    }\n\n    if (this.state.adName == null || this.state.adName == \"\") {\n      this.setState({ adNameError: \"Enter advertisement Name\" });\n      error = true;\n    } else {\n      this.setState({ adNameError: null });\n    }\n\n    // if (this.state.shopId == null) {\n    //   this.setState({ shopIdError: \"Service Provider not selected\" });\n    //   error = true;\n    // } else {\n    //   this.setState({ shopIdError: null });\n    // }\n\n    if (error == false) {\n      var formData = new FormData();\n\n      formData.append(\"adImage\", this.state.adImage);\n      formData.append(\"adName\", this.state.adName);\n\n      formData.append(\"shopId\", this.state.shopId);\n\n      //   formData.append(\"createdAt\", new Date());\n      //   formData.append(\"updatedAt\", new Date());\n\n      this.setState({ loading: true });\n      fetch(api.apiUrl + \"add_advertisement\", {\n        method: \"POST\",\n        headers: authHeaderFile(),\n        // body: JSON.stringify(data),\n        body: formData,\n      })\n        .then((response) => response.json())\n        .then((responseJsonFromServerData) => {\n          // console.log(responseJsonFromServerData);\n          if (responseJsonFromServerData.error == false) {\n            //   console.log(\"sucess1\");\n            Toast.success(\"Added successfully...\", 600, () => {\n              // do something after the toast disappears\n              document.getElementById(\"adNameForm\").reset();\n              this.setState({\n                adImage: null,\n                adImagePreview: null,\n                adName: null,\n                shopId: null,\n                adImageError: null,\n                adNameError: null,\n                shopIdError: null,\n              });\n              this.props.history.push({\n                pathname: \"/advertisement-list\",\n                data: 0,\n              });\n            });\n          } else if (responseJsonFromServerData.error == true) {\n            Toast.fail(\"failed...\", 600, () => {\n              // do something after the toast disappears\n            });\n          } else if (responseJsonFromServerData.error === \"format_invalid\") {\n            Toast.fail(\"Selected Image is of invalid format...\", 600, () => {\n              // do something after the toast disappears\n            });\n          }\n          this.setState({ loading: false });\n        })\n        .catch((error) => {\n          console.error(error);\n          this.setState({ loading: false });\n        });\n    }\n  };\n\n  cancel = () => {\n    document.getElementById(\"adNameForm\").reset();\n    this.props.history.push(\"/advertisement-list\");\n  };\n\n  render() {\n    return (\n      <>\n        <CRow>\n          <CCol>\n            <CCard>\n              <ScaleLoader\n                height={40}\n                width={12}\n                css={override}\n                size={150}\n                //size={\"150px\"} this also works\n                color={\"#B54545\"}\n                loading={this.state.loading}\n              />\n              <CCardHeader>\n                {\" \"}\n                <CRow>\n                  <CCol sm=\"6\" xs=\"6\" md=\"8\">\n                    <h3>Add Advertisement</h3>\n                  </CCol>\n                  <CCol sm=\"6\" xs=\"6\" md=\"4\"></CCol>\n                </CRow>\n              </CCardHeader>\n              <CCardBody>\n                <CRow>\n                  <CCol md=\"3\" sm=\"3\" xs=\"1\"></CCol>\n                  <CCol md=\"6\" sm=\"6\" xs=\"10\">\n                    <form id=\"adNameForm\">\n                      <CFormGroup>\n                        <CLabel htmlFor=\"\">Advertisement</CLabel>\n                        <CInputFile\n                          id=\"\"\n                          name=\"\"\n                          onChange={this.onChangeFile}\n                        />\n                      </CFormGroup>\n                      <div\n                        style={{\n                          marginBottom: \"10px\",\n                          display:\n                            this.state.adImage !== null ? \"block\" : \"none\",\n                        }}\n                      >\n                        <img\n                          style={{ maxWidth: \"327px\", maxHeight: \"125px\" }}\n                          src={this.state.adImagePreview}\n                          alt=\"Advertisement image\"\n                        />\n                      </div>\n\n                      <p\n                        className=\"error\"\n                        style={{\n                          display:\n                            this.state.adImageError === null ? \"none\" : \"block\",\n                        }}\n                      >\n                        <i className=\"fa fa-exclamation-triangle\"></i>{\" \"}\n                        {this.state.adImageError}\n                      </p>\n\n                      <CFormGroup>\n                        <CLabel htmlFor=\"adName\">Advertisement Name</CLabel>\n\n                        <CInput\n                          autoFocus\n                          type=\"text\"\n                          placeholder=\"Enter Advertisement Name\"\n                          onChange={this.handleChange(\"adName\")}\n                          style={{\n                            borderColor:\n                              this.state.adNameError === null ? \"\" : \"red\",\n                          }}\n                        />\n                      </CFormGroup>\n                      <p\n                        className=\"error\"\n                        style={{\n                          display:\n                            this.state.adNameError === null ? \"none\" : \"block\",\n                        }}\n                      >\n                        <i className=\"fa fa-exclamation-triangle\"></i>{\" \"}\n                        {this.state.adNameError}\n                      </p>\n\n                      <CFormGroup>\n                        <CLabel htmlFor=\"shopId\">\n                          Select Service Provider\n                        </CLabel>\n\n                        <Select\n                          options={this.state.options}\n                          isClearable={true}\n                          onChange={(val) => {\n                            // alert(val.value)\n                            if (val != null) {\n                              this.setState({ shopId: val.value });\n                            } else {\n                              this.setState({ shopId: null });\n                            }\n                            console.log(val);\n                          }}\n                        />\n                      </CFormGroup>\n                      <p\n                        className=\"error\"\n                        style={{\n                          display:\n                            this.state.shopIdError === null ? \"none\" : \"block\",\n                        }}\n                      >\n                        <i className=\"fa fa-exclamation-triangle\"></i>{\" \"}\n                        {this.state.shopIdError}\n                      </p>\n\n                      <CCol md=\"12\" sm=\"12\" xs=\"12\" className=\"text-center\">\n                        <CButton\n                          className=\"px-4 cancel-btn\"\n                          onClick={() => this.cancel()}\n                        >\n                          Cancel\n                        </CButton>\n                        <CButton\n                          className=\"px-4 submit-btn\"\n                          onClick={this.adSubmit}\n                        >\n                          Submit\n                        </CButton>\n                      </CCol>\n                    </form>\n                  </CCol>\n                </CRow>\n              </CCardBody>\n            </CCard>\n          </CCol>\n        </CRow>\n      </>\n    );\n  }\n}\n\nexport default AddAdvertisement;\n"],"sourceRoot":""}