(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[23],{712:function(e,t,n){"use strict";var a=n(713),r={RAZOR_PAY_TEST_KEY:"rzp_live_BXGi4WJt107sJX",apiUrl:"http://api.mechgiri.com/web/",mobileApiUrl:"http://api.mechgiri.com/API/",imgUrlService:"http://api.mechgiri.com/service-icons/",imgUrlBrand:"http://api.mechgiri.com/brand-icons/",imgUrlAds:"http://api.mechgiri.com/mobile-ads/",imgUrlShopImg:"http://api.mechgiri.com/shop-img/",noImage:n.n(a).a};t.a=r},713:function(e,t,n){e.exports=n.p+"static/media/no_image.104a1a91.png"},716:function(e,t,n){"use strict";var a=n(1),r=n.n(a),i=n(112),s=n.n(i);var c="style_mask__9zmSN",o="style_box__2iia4",l="style_enter__29LyQ",m="style_exit__3WYmp",u="style_message__1DUXc",d="style_wrapper__cQFyX",p="style_loading__2pb7J";!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var a=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&a.firstChild?a.insertBefore(r,a.firstChild):a.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}(".style_mask__9zmSN{position:fixed;top:0;right:0;bottom:0;left:0;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center;background:transparent;z-index:1999}.style_box__2iia4{display:inline-block;max-width:85%;min-width:95px;padding:9px 15px;box-sizing:border-box;text-align:center;word-break:break-all;white-space:pre-wrap;font-size:0;color:#fff;background-color:rgba(58,58,58,.9);border-radius:3px;opacity:0;-webkit-transform:scale(.9);transform:scale(.9);-webkit-backface-visibility:hidden;backface-visibility:hidden;transition:opacity .3s,-webkit-transform .3s;transition:opacity .3s,transform .3s;transition:opacity .3s,transform .3s,-webkit-transform .3s}.style_enter__29LyQ{opacity:1;-webkit-transform:scale(1);transform:scale(1)}.style_exit__3WYmp{opacity:0;-webkit-transform:scale(.9);transform:scale(.9)}.style_message__1DUXc{line-height:1.5;font-size:14px}.style_wrapper__cQFyX{margin:0 auto 7px;width:36px;height:36px}.style_loading__2pb7J{-webkit-animation:style_loading__2pb7J 1s linear infinite;animation:style_loading__2pb7J 1s linear infinite}@-webkit-keyframes style_loading__2pb7J{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes style_loading__2pb7J{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}");var h=function(e){switch(e.type){case"success":return r.a.createElement("svg",{viewBox:"0 0 1024 1024",fill:"#fff"},r.a.createElement("path",{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0 0 51.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}),r.a.createElement("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}));case"fail":return r.a.createElement("svg",{viewBox:"0 0 1024 1024",fill:"#fff"},r.a.createElement("path",{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 0 0-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}),r.a.createElement("path",{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}));case"loading":return r.a.createElement("svg",{viewBox:"0 0 1024 1024",fill:"#fff",className:p},r.a.createElement("path",{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}))}},f=new(function(){function e(){this._events={},this._publishedEvents=[],this._uniqueId=0}return e.prototype.subscribe=function(e,t){this._events[e]||(this._events[e]=[]);var n={key:this._uniqueId++,callback:t};return this._events[e].push(n),n.key},e.prototype.publish=function(e,t){this._publishedEvents.push({name:e,data:t}),this._events[e]&&this._events[e].forEach((function(e){(0,e.callback)(t)}))},e.prototype.unSubscribe=function(e,t){if(this._events[e])for(var n=0;n<this._events[e].length;n++)if(t===this._events[e][n].key){this._events[e].splice(n,1);break}},e.prototype.ensureTriggeredAndSubscribe=function(e,t){var n=this._publishedEvents.slice().reverse().find((function(t){return t.name===e}));return n&&t(n.data),this.subscribe(e,t)},e}()),g=function(e){var t=e.id,n=e.type,i=e.content,s=e.duration,p=void 0===s?3e3:s,g=e.onClose,b=Object(a.useState)(o),v=b[0],E=b[1],y=Object(a.useState)(!1),_=y[0],x=y[1],S=Object(a.useRef)(null);function k(){E((function(){return o+" "+m}))}return Object(a.useEffect)((function(){S.current&&S.current.scrollTop,E((function(e){return e+" "+l}))}),[]),Object(a.useEffect)((function(){var e=-1,n=-1;return _&&(e=f.ensureTriggeredAndSubscribe("lt#exit",(function(e){e===t&&k()})),0!==p&&(n=window.setTimeout(k,p))),function(){f.unSubscribe("lt#exit",e),window.clearTimeout(n)}}),[t,p,_]),r.a.createElement("div",{className:c},r.a.createElement("div",{className:v,style:"info"===n?void 0:{padding:15,borderRadius:5},onTransitionEnd:function(){~v.indexOf(l)&&x(!0),~v.indexOf(m)&&g()},ref:S},"info"!==n&&r.a.createElement("div",{className:d,style:"loading"===n?{marginBottom:10}:void 0},r.a.createElement(h,{type:n})),r.a.createElement("span",{className:u},i)))},b=function(){return(b=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},v=new(function(){function e(){this._messages=[],this._uniqueId=0}return e.prototype.push=function(e){this._messages.push(b({id:this._uniqueId++},e))},Object.defineProperty(e.prototype,"length",{get:function(){return this._messages.length},enumerable:!1,configurable:!0}),e.prototype.getFirstMessage=function(){return this._messages[0]},e.prototype.shift=function(){return this._messages.shift()},e}());function E(e,t,n,a){if(v.push({type:e,content:t,duration:n,onClose:a}),1!==v.length){if(v.length>1){var r=v.getFirstMessage();"loading"===r.type&&f.publish("lt#exit",r.id)}}else f.publish("lt#popmessage",v.getFirstMessage())}f.subscribe("lt#popmessage",(function(e){var t=e.id,n=e.type,a=e.content,i=e.duration,c=e.onClose,o=document.createElement("div");document.body.appendChild(o),s.a.render(r.a.createElement(g,{id:t,type:n,content:a,duration:i,onClose:function(){s.a.unmountComponentAtNode(o),document.body.removeChild(o),c&&c(),v.shift(),v.length>0&&f.publish("lt#popmessage",v.getFirstMessage())}}),o)}));var y={info:function(e,t,n){E("info",e,t,n)},success:function(e,t,n){E("success",e,t,n)},fail:function(e,t,n){E("fail",e,t,n)},loading:function(e,t){E("loading",e,0,t)},hide:function(){v.length>0&&f.publish("lt#exit",v.getFirstMessage().id)}};t.a=y},723:function(e,t,n){"use strict";function a(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken?{"x-access-token":e.accessToken}:{}}n.d(t,"a",(function(){return a}))},878:function(e,t,n){"use strict";n.r(t);var a,r=n(203),i=n(198),s=n(199),c=n(202),o=n(201),l=n(200),m=n(718),u=n(1),d=n.n(u),p=n(717),h=n(712),f=n(723),g=n(716),b=n(719),v=n(714),E=Object(v.css)(a||(a=Object(m.a)(["\n  display: block;\n  border-color: black;\n  position: absolute;\n  left: 43%;\n  top: 50%;\n  z-index: 1;\n"]))),y=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).handleChange=function(e){return function(t){console.log(e),console.log(t.target.value),a.setState(Object(r.a)({},e,t.target.value)),a.setState(Object(r.a)({},e+"Error",""))}},a.onChangeFile=function(e){var t=e.target.files[0],n=!1;t||(a.setState({iconError:"Please select image",icon:null}),n=!0),t.name.match(/\.(jpg|jpeg|png)$/)||(a.setState({iconError:"Please select valid image",icon:null}),n=!0),Math.round(t.size/1024)>300&&(a.setState({iconError:"Max file size 300kb",icon:null}),n=!0),!1===n?a.setState({icon:e.target.files[0],iconPreview:URL.createObjectURL(e.target.files[0]),iconError:""}):(console.log("failed"),a.setState({icon:null,iconPreview:null}))},a.serviceSubmit=function(){if(null===a.state.icon&&a.setState({iconError:"Select Icon"}),""===a.state.code&&a.setState({codeError:"Enter Code"}),""!==a.state.code&&3!==a.state.code.length&&a.setState({codeError:"Enter 3 char Code"}),""===a.state.name&&a.setState({nameError:"Enter Name"}),""!==a.state.service&&"select"!==a.state.service||a.setState({serviceError:"Select Service Type"}),null!==a.state.icon&&""!==a.state.code&&3===a.state.code.length&&""!==a.state.name&&""!==a.state.service&&"select"!==a.state.service){var e=new FormData;e.append("icon",a.state.icon),e.append("code",a.state.code),e.append("name",a.state.name),e.append("serviceType",a.state.service),a.setState({loading:!0}),fetch(h.a.apiUrl+"add_service",{method:"POST",headers:Object(f.a)(),body:e}).then((function(e){return e.json()})).then((function(e){"success"===e?g.a.success("Add successfully...",600,(function(){document.getElementById("serviceForm").reset(),a.setState({icon:null}),a.props.history.push("/services")})):"failed"===e?g.a.fail("failed...",600,(function(){})):"format_invalid"===e&&g.a.fail("Select Image...",600,(function(){})),a.setState({loading:!1})})).catch((function(e){console.error(e),a.setState({loading:!1})}))}},a.cancel=function(){document.getElementById("serviceForm").reset(),a.props.history.push("/services")},a.handleChange=a.handleChange.bind(Object(c.a)(a)),a.onChangeFile=a.onChangeFile.bind(Object(c.a)(a)),a.serviceSubmit=a.serviceSubmit.bind(Object(c.a)(a)),a.cancel=a.cancel.bind(Object(c.a)(a)),a.state={loading:!1,icon:null,iconPreview:null,code:"",name:"",service:"",iconError:"",codeError:"",nameError:"",serviceError:""},a}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return d.a.createElement(d.a.Fragment,null,d.a.createElement(p.Q,null,d.a.createElement(p.j,null,d.a.createElement(p.f,null,d.a.createElement(b.ScaleLoader,{height:40,width:12,css:E,size:150,color:"#B54545",loading:this.state.loading}),d.a.createElement(p.i,null," ",d.a.createElement(p.Q,null,d.a.createElement(p.j,{sm:"6",xs:"6",md:"8"},d.a.createElement("h3",null,"Add Service")),d.a.createElement(p.j,{sm:"6",xs:"6",md:"4"}))),d.a.createElement(p.g,null,d.a.createElement(p.Q,null,d.a.createElement(p.j,{md:"3",sm:"3",xs:"1"}),d.a.createElement(p.j,{md:"6",sm:"6",xs:"10"},d.a.createElement("form",{id:"serviceForm"},d.a.createElement(p.t,null,d.a.createElement(p.F,{htmlFor:""},"Icon"),d.a.createElement(p.z,{id:"",name:"",onChange:this.onChangeFile})),d.a.createElement("div",{style:{marginBottom:"10px",display:null!==this.state.icon?"block":"none"}},d.a.createElement("img",{style:{maxWidth:"150px",maxHeight:"150px"},src:this.state.iconPreview})),d.a.createElement("p",{className:"error",style:{display:""===this.state.iconError?"none":"block"}},d.a.createElement("i",{className:"fa fa-exclamation-triangle"})," ",this.state.iconError),d.a.createElement(p.t,null,d.a.createElement(p.F,{htmlFor:"code"},"Code"),d.a.createElement(p.x,{autoFocus:!0,type:"text",id:"code",name:"code",placeholder:"eg. CCH",onChange:this.handleChange("code"),style:{borderColor:""===this.state.codeError?"":"red"}})),d.a.createElement("p",{className:"error",style:{display:""===this.state.codeError?"none":"block"}},d.a.createElement("i",{className:"fa fa-exclamation-triangle"})," ",this.state.codeError),d.a.createElement(p.t,null,d.a.createElement(p.F,{htmlFor:"name"},"Name"),d.a.createElement(p.x,{type:"text",id:"name",name:"name",placeholder:"Name",onChange:this.handleChange("name"),style:{borderColor:""===this.state.nameError?"":"red"}})),d.a.createElement("p",{className:"error",style:{display:""===this.state.nameError?"none":"block"}},d.a.createElement("i",{className:"fa fa-exclamation-triangle"})," ",this.state.nameError),d.a.createElement(p.t,null,d.a.createElement(p.F,{htmlFor:"service"},"Service Type"),d.a.createElement(p.R,{custom:!0,name:"service",id:"service",onChange:this.handleChange("service"),style:{borderColor:""===this.state.serviceError?"":"red"}},d.a.createElement("option",{value:"select"},"Select Service"),d.a.createElement("option",{value:"0"},"Garage"),d.a.createElement("option",{value:"1"},"Spares"),d.a.createElement("option",{value:"2"},"Ancillary"))),d.a.createElement("p",{className:"error",style:{display:""===this.state.serviceError||"select"===this.state.serviceError?"none":"block"}},d.a.createElement("i",{className:"fa fa-exclamation-triangle"})," ",this.state.serviceError),d.a.createElement(p.j,{md:"12",sm:"12",xs:"12",className:"text-center"},d.a.createElement(p.d,{className:"px-4 cancel-btn",onClick:function(){return e.cancel()}},"Cancel"),d.a.createElement(p.d,{className:"px-4 submit-btn",onClick:this.serviceSubmit},"Submit"))))))))))}}]),n}(u.Component);t.default=y}}]);
//# sourceMappingURL=23.c2c7154c.chunk.js.map