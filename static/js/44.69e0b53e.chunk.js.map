{"version":3,"sources":["api.js","assets/images/no_image.png","auth-header.js","views/referrals/Referrals.js"],"names":["api","RAZOR_PAY_TEST_KEY","apiUrl","mobileApiUrl","imgUrlService","imgUrlBrand","imgUrlAds","imgUrlShopImg","noImage","img","module","exports","authHeader","user","JSON","parse","localStorage","getItem","accessToken","override","css","referrals","props","state","data","loading","count","info","this","setState","fetch","method","headers","then","response","json","responseJsonFromServerData","console","log","shopContactPerson","map","item","key","firstName","lastName","arr","provider","shopName","person","push","catch","error","datatable","columns","label","field","sort","width","attributes","rows","height","size","color","sm","xs","md","hover","entriesOptions","entries","pagesAmount","pagingTop","searchTop","searchBottom","barReverse","responsive","Component"],"mappings":"6KAAA,aACIA,EAAM,CASRC,mBAAoB,0BAEpBC,OAAQ,+BACRC,aAAc,+BACdC,cAAe,yCACfC,YAAa,uCACbC,UAAW,sCACXC,cAAe,oCAEfC,QAnBF,OAmBWC,GASIT,O,oBC5BfU,EAAOC,QAAU,IAA0B,sC,iCCA5B,SAASC,IACtB,IAAMC,EAAOC,KAAKC,MAAMC,aAAaC,QAAQ,SAE7C,OAAIJ,GAAQA,EAAKK,YAER,CACL,eAAgB,mBAChB,iBAAkBL,EAAKK,aAGlB,GAVX,mC,mLCSMC,EAAWC,cAAG,wIASdC,EAAS,kDACb,WAAYC,GAAQ,IAAD,EAOf,OAPe,qBACjB,cAAMA,IAEDC,MAAQ,CACXC,KAAM,GACNC,SAAS,EACTC,MAAO,IACP,EAoIH,OAnIA,8CAED,WAAqB,IAAD,OACdC,EAAO,GACXC,KAAKC,SAAS,CAAEJ,SAAS,IACzBK,MAAM9B,IAAIE,OAAS,gBAAiB,CAClC6B,OAAQ,MACRC,QAASpB,gBAERqB,MAAK,SAACC,GAAQ,OAAKA,EAASC,UAC5BF,MAAK,SAACG,GACLC,QAAQC,IAAIF,GACZ,IAAIG,EAAoB,GACxBH,EAA2BI,KAAI,SAACC,EAAMC,GACpCH,EAAoBE,EAAKE,UAAY,IAAMF,EAAKG,SAEhD,IAAIC,EAAM,CACRC,SAAUL,EAAKM,SACfC,OAAQT,EACRlB,UAAWoB,EAAKjB,MAElBG,EAAKsB,KAAKJ,MAEZ,EAAKhB,SAAS,CACZL,KAAMG,EACNF,SAAS,OAGZyB,OAAM,SAACC,GACNd,QAAQc,MAAMA,GACd,EAAKtB,SAAS,CAAEJ,SAAS,OAI7BK,MAAM9B,IAAIE,OAAS,sBAAuB,CACxC6B,OAAQ,MACRC,QAASpB,gBAERqB,MAAK,SAACC,GAAQ,OAAKA,EAASC,UAC5BF,MAAK,SAACG,GACLC,QAAQC,IAAIF,GACZ,EAAKP,SAAS,CAAEH,MAAOU,OAExBc,OAAM,SAACC,GACNd,QAAQc,MAAMA,GACd,EAAKtB,SAAS,CAAEJ,SAAS,SAE9B,oBAED,WACE,IAAI2B,EAAY,CACdC,QAAS,CACP,CACEC,MAAO,mBACPC,MAAO,WACPC,KAAM,WACNC,MAAO,IACPC,WAAY,CACV,gBAAiB,YACjB,aAAc,SAGlB,CACEJ,MAAO,iBACPC,MAAO,SACPC,KAAM,WACNC,MAAO,KAET,CACEH,MAAO,YACPC,MAAO,YACPC,KAAM,WACNC,MAAO,MASXE,KAAK,YAAK/B,KAAKL,MAAMC,OAEvB,OACE,oCACE,kBAAC,IAAI,KACH,kBAAC,IAAI,KACH,kBAAC,IAAK,KACJ,kBAAC,cAAW,CACVoC,OAAQ,GACRH,MAAO,GACPrC,IAAKD,EACL0C,KAAM,IAENC,MAAO,UACPrC,QAASG,KAAKL,MAAME,UAEtB,kBAAC,IAAW,KACV,kBAAC,IAAI,KACH,kBAAC,IAAI,CAACsC,GAAG,IAAIC,GAAG,IAAIC,GAAG,KACrB,4BAAI,eAEN,kBAAC,IAAI,CAACF,GAAG,IAAIC,GAAG,IAAIC,GAAG,QAG3B,kBAAC,IAAS,KACR,kBAAC,IAAI,KACH,kBAAC,IAAI,CAACA,GAAG,KAAKF,GAAG,KAAKC,GAAG,MACvB,4BAAI,UAAQpC,KAAKL,MAAMG,QAEzB,kBAAC,IAAI,CAACuC,GAAG,KAAKF,GAAG,KAAKC,GAAG,MACvB,kBAAC,IAAc,CACbE,OAAK,EACLC,eAAgB,CAAC,EAAG,IACpBC,QAAS,EACTC,YAAa,EACb7C,KAAM4B,EACNkB,WAAS,EACTC,WAAS,EACTC,cAAc,EACdC,YAAU,EACVC,YAAU,eAU7B,EA5IY,CAASC,aA8ITtD","file":"static/js/44.69e0b53e.chunk.js","sourcesContent":["import img from \"./assets/images/no_image.png\";\nvar api = {\n  //heroku\n  // apiUrl: \"https://mechgiri-api.herokuapp.com/web/\",\n  // mobileApiUrl: \"https://mechgiri-api.herokuapp.com/API/\",\n  // imgUrlService: \"https://mechgiri-api.herokuapp.com/service-icons/\",\n  // imgUrlBrand: \"https://mechgiri-api.herokuapp.com/brand-icons/\",\n  // imgUrlAds: \"https://mechgiri-api.herokuapp.com/mobile-ads/\",\n  // imgUrlShopImg: \"https://mechgiri-api.herokuapp.com/shop-img/\",\n\n  RAZOR_PAY_TEST_KEY: \"rzp_live_BXGi4WJt107sJX\",\n\n  apiUrl: \"http://api.mechgiri.com/web/\",\n  mobileApiUrl: \"http://api.mechgiri.com/API/\",\n  imgUrlService: \"http://api.mechgiri.com/service-icons/\",\n  imgUrlBrand: \"http://api.mechgiri.com/brand-icons/\",\n  imgUrlAds: \"http://api.mechgiri.com/mobile-ads/\",\n  imgUrlShopImg: \"http://api.mechgiri.com/shop-img/\",\n\n  noImage: img,\n\n  // apiUrl: \"http://127.0.0.1:3001/web/\",\n  // mobileApiUrl: \"http://127.0.0.1:3001/API/\",\n  // imgUrlService: \"http://127.0.0.1:3001/service-icons/\",\n  // imgUrlBrand: \"http://127.0.0.1:3001/brand-icons/\",\n  // imgUrlAds: \"http://127.0.0.1:3001/mobile-ads/\",\n  // imgUrlShopImg: \"http://127.0.0.1:3001/shop-img/\",\n};\nexport default api;\n","module.exports = __webpack_public_path__ + \"static/media/no_image.104a1a91.png\";","export default function authHeader() {\r\n  const user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n  if (user && user.accessToken) {\r\n    // header for all requests\r\n    return {\r\n      \"Content-Type\": \"application/json\",\r\n      \"x-access-token\": user.accessToken,\r\n    };\r\n  } else {\r\n    return {};\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { CCard, CCardBody, CCardHeader, CCol, CRow } from \"@coreui/react\";\r\n\r\nimport api from \"../../api\";\r\nimport authHeader from \"../../auth-header\";\r\nimport { MDBDataTableV5 } from \"mdbreact\";\r\nimport moment from \"moment\";\r\nimport { ScaleLoader } from \"react-spinners\";\r\nimport { css } from \"@emotion/core\";\r\nconst override = css`\r\n  display: block;\r\n  border-color: black;\r\n  position: absolute;\r\n  left: 43%;\r\n  top: 50%;\r\n  z-index: 1;\r\n`;\r\n\r\nclass referrals extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      data: [],\r\n      loading: false,\r\n      count: \"\",\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    var info = [];\r\n    this.setState({ loading: true });\r\n    fetch(api.apiUrl + \"get_referrals\", {\r\n      method: \"GET\",\r\n      headers: authHeader(),\r\n    })\r\n      .then((response) => response.json())\r\n      .then((responseJsonFromServerData) => {\r\n        console.log(responseJsonFromServerData);\r\n        var shopContactPerson = \"\";\r\n        responseJsonFromServerData.map((item, key) => {\r\n          shopContactPerson = item.firstName + \" \" + item.lastName;\r\n\r\n          var arr = {\r\n            provider: item.shopName,\r\n            person: shopContactPerson,\r\n            referrals: item.data,\r\n          };\r\n          info.push(arr);\r\n        });\r\n        this.setState({\r\n          data: info,\r\n          loading: false,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n        this.setState({ loading: false });\r\n      });\r\n\r\n    //get count\r\n    fetch(api.apiUrl + \"get_referrals_count\", {\r\n      method: \"GET\",\r\n      headers: authHeader(),\r\n    })\r\n      .then((response) => response.json())\r\n      .then((responseJsonFromServerData) => {\r\n        console.log(responseJsonFromServerData);\r\n        this.setState({ count: responseJsonFromServerData });\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n        this.setState({ loading: false });\r\n      });\r\n  }\r\n\r\n  render() {\r\n    var datatable = {\r\n      columns: [\r\n        {\r\n          label: \"Service Provider\",\r\n          field: \"provider\",\r\n          sort: \"disabled\",\r\n          width: 150,\r\n          attributes: {\r\n            \"aria-controls\": \"DataTable\",\r\n            \"aria-label\": \"Icon\",\r\n          },\r\n        },\r\n        {\r\n          label: \"Contact Person\",\r\n          field: \"person\",\r\n          sort: \"disabled\",\r\n          width: 100,\r\n        },\r\n        {\r\n          label: \"Referrals\",\r\n          field: \"referrals\",\r\n          sort: \"disabled\",\r\n          width: 150,\r\n        },\r\n        // {\r\n        //   label: \"referrals Count\",\r\n        //   field: \"count\",\r\n        //   sort: \"disabled\",\r\n        //   width: 270,\r\n        // },\r\n      ],\r\n      rows: [...this.state.data],\r\n    };\r\n    return (\r\n      <>\r\n        <CRow>\r\n          <CCol>\r\n            <CCard>\r\n              <ScaleLoader\r\n                height={40}\r\n                width={12}\r\n                css={override}\r\n                size={150}\r\n                //size={\"150px\"} this also works\r\n                color={\"#B54545\"}\r\n                loading={this.state.loading}\r\n              />\r\n              <CCardHeader>\r\n                <CRow>\r\n                  <CCol sm=\"6\" xs=\"6\" md=\"8\">\r\n                    <h3>Referrals </h3>\r\n                  </CCol>\r\n                  <CCol sm=\"6\" xs=\"6\" md=\"4\"></CCol>\r\n                </CRow>\r\n              </CCardHeader>\r\n              <CCardBody>\r\n                <CRow>\r\n                  <CCol md=\"12\" sm=\"12\" xs=\"12\">\r\n                    <h3>Count: {this.state.count}</h3>\r\n                  </CCol>\r\n                  <CCol md=\"12\" sm=\"12\" xs=\"12\">\r\n                    <MDBDataTableV5\r\n                      hover\r\n                      entriesOptions={[6, 10]}\r\n                      entries={6}\r\n                      pagesAmount={4}\r\n                      data={datatable}\r\n                      pagingTop\r\n                      searchTop\r\n                      searchBottom={false}\r\n                      barReverse\r\n                      responsive\r\n                    />\r\n                  </CCol>\r\n                </CRow>\r\n              </CCardBody>\r\n            </CCard>\r\n          </CCol>\r\n        </CRow>\r\n      </>\r\n    );\r\n  }\r\n}\r\nexport default referrals;\r\n"],"sourceRoot":""}